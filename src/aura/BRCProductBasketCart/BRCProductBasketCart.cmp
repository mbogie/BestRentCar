<aura:component description="BRCProductBasketCart" implements="forceCommunity:availableForAllPageTypes"
                access="global">

    <aura:attribute name="productList" type="Object[]"/>
    <aura:attribute name="emptyCard" type="Boolean" default="true"/>
    <aura:attribute name="totalPrice" type="Currency" default="0"/>
    <aura:attribute name="userId" type="String" default=""/>

    <aura:registerEvent name="refreshCart" type="c:BRCRefreshCartListEvent"/>
    <aura:handler name="init" action="{!c.doInit}" value="{!this}"/>

    <lightning:layout multipleRows="false" horizontalAlign="center" class="header">
        <lightning:layoutItem size="7">
                {!$Label.c.BRC_Cart_Label}
        </lightning:layoutItem>
        <lightning:layoutItem size="5">
            <div class="priceLabel">
                    {!$Label.c.BRC_Total_Price}
            </div>
            <div class="price">
                <lightning:formattedNumber value="{!v.totalPrice}" style="currency"/>
            </div>
        </lightning:layoutItem>
    </lightning:layout>
    <lightning:layout multipleRows="false" class="tableHeader">
        <lightning:layoutItem size="1"/>
        <lightning:layoutItem size="6">
                {!$Label.c.BRC_Product_Name}
        </lightning:layoutItem>
        <lightning:layoutItem size="2">
                {!$Label.c.BRC_Days_Label}
        </lightning:layoutItem>
        <lightning:layoutItem size="3">
                {!$Label.c.BRC_Price}
        </lightning:layoutItem>
    </lightning:layout>
    <aura:iteration var="product" items="{!v.productList}" indexVar="index">
        <lightning:layout multipleRows="true" class="tableRow" verticalAlign="center">
            <lightning:layoutItem size="1">
                <c:BRCCartItem item="{!product}"/>
            </lightning:layoutItem>
            <lightning:layoutItem size="6">
                <div class="productNameLink" data-index="{!index}" onclick="{!c.navigateToProduct}">
                        {!product.product.Name}
                </div>
            </lightning:layoutItem>
            <lightning:layoutItem size="2">
                <lightning:layout multipleRows="false" verticalAlign="center">
                        {!product.days}
                </lightning:layout>
            </lightning:layoutItem>
            <lightning:layoutItem size="2">
                <div class="itemPrice">
                    <lightning:formattedNumber value="{!product.price.UnitPrice*product.days}" style="currency"/>
                </div>
                <div class="itemPriceDay">(
                    <lightning:formattedNumber value="{!product.price.UnitPrice}"
                                               style="currency"/>{!$Label.c.BRC_Dash_Day})
                </div>
            </lightning:layoutItem>
            <lightning:layoutItem size="1">
                <button label="" title="Delete" onclick="{!c.deleteItem}" data-index="{!index}" class="daysButton">
                    <lightning:icon iconName="utility:clear" size="small" class="red" alternativeText=""/>
                </button>
            </lightning:layoutItem>
        </lightning:layout>
    </aura:iteration>
    <lightning:layout multipleRows="true" class="buttons" horizontalAlign="end">
        <lightning:button variant="base"
                          class="customButton"
                          disabled="{!v.emptyCard}"
                          label="{!$Label.c.Button_Clear}"
                          title="{!$Label.c.Button_Clear}"
                          onclick="{!c.clearCart}"/>
        <lightning:button variant="base"
                          class="customButton"
                          label="{!$Label.c.Button_Order}"
                          title="{!$Label.c.Button_Order}"
                          disabled="{!v.emptyCard}"
                          onclick="{!c.goToCartPage}"/>
    </lightning:layout>
</aura:component>